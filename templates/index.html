<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="../static/css/styles.css">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>

	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<div class="container-fluid">
			<a class="navbar-brand d-none d-lg-block mx-auto" href="#">Sake Catalog</a>
			<button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="offcanvas offcanvas-start d-lg-none" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
				<div class="offcanvas-header">
					<h5 class="offcanvas-title" id="offcanvasNavbarLabel">Filters</h5>
					<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
				</div>
				<div class="offcanvas-body">
					<input type="text" id="mobileSearchInput" placeholder="Search for sake..."/>
					{% for filter in filters %}
							<button class="accordion">{{ filter.section }}</button>
							<div class="panel">
									{% for item in filter.fields %}
											<input type="checkbox" name="{{ item.name }}" id="mobile-{{ item.id }}" value="{{ item.value }}">
											<label for="mobile-{{ item.id }}">{{ item.label }}</label>
											<br/>
									{% endfor %}
							</div>
					{% endfor %}
					<button id="mobileClearFilters">Clear Filters</button>
			</div>
			</div>
		</div>
	</nav>
	<div class="main-container">
			<div class="sidebar">
					<h2>Sidebar</h2>
					<input type="text" id="searchInput" placeholder="Search for sake..."/>
					{% for filter in filters %}
							<button class="accordion">{{ filter.section }}</button>
							<div class="panel">
									{% for item in filter.fields %}
											<input type="checkbox" name="{{ item.name }}" id="{{ item.id }}" value="{{ item.value }}">
											<label for="{{ item.id }}">{{ item.label }}</label>
											<br/>
									{% endfor %}
							</div>
					{% endfor %}
					<button id="clearFilters">Clear Filters</button>
					<br/>
					{% if current_user.is_authenticated %}
          <button id="logout">Logout</button>
          {% endif %}
			</div>
			<div id="flexBody">
				<div class="grid-container">
						{% for sake in sakes %}
						<div class="grid-item" data-id="{{sake._id}}" data-region="{{sake.properties.region}}" data-brewery="{{sake.properties.brewery}}" data-alchohol="{{sake.properties.alchohol}}">
							<img src="data:image/jpeg;base64,{{ sake.image_base64 }}" alt="{{ sake.name }}">
							<div class="content">
								<h2>{{ sake.name }}</h2>
								<p>Region: {{ sake.properties.region }}</p>
								<p>Brewery: {{ sake.properties.brewery }}</p>
								<p>Alchohol %: {{ sake.properties.alchohol }}</p>
								<p>Sizes: {{ sake.properties.sizes }}</p>
								<p>Taste: {{ sake.properties.taste }}</p>
								<p>Pairing: {{ sake.properties.pairing }}</p>
								<p>Style: {{ sake.properties.style }}</p>
								<p>Price: {{ sake.properties.price }}</p>
								<p class="description" style="display: none">Description: {{ sake.description }} </p>
								{% if current_user.is_authenticated %}
									<button class="editButton">Edit</button>
									<button id="deleteButton">Delete</button>
								{% endif %}
								<button class="learnMore">Learn More</button>
							</div>
						</div>
						{% endfor %}
				</div>
				<button id="loadMore">Load More</button>
			</div>
			<!-- Edit Modal -->
			<div id="myModal" class="modal">
				<div class="modalEditContent">
					<span class="close">&times;</span>
					<form id="editForm">
						<input type="hidden" name="sakeId">
						<label for="name">Name</label>
						<input type="input" name="name" id="name">
						<br>
				
						<label for="region">Region/Prefecture</label>
						<input type="input" name="region" id="region">
						<br>
						<label for="brewery">Brewery</label>
						<input type="input" name="brewery" id="brewery">
						<br>
						<label for="alchohol">Alchohol %</label>
						<input type="number" name="alchohol %" id="alchohol">
						<br>
						<label for="sizes">Available Sizes</label>
						<input type="input" name="sizes" id="sizes">
						<br>
						<label for="taste">Taste</label>
						<input type="input" name="taste" id="taste">
						<br>
						<label for="pairing">Pairing</label>
						<input type="input" name="pairing" id="pairing">
						<br>
						<label for="style">Style</label>
						<input type="input" name="style" id="style">
						<br>
						<label for="price">Price</label>
						<input type="number" name="price" id="price">
						<br>
						<!-- <label for="alchohol">Alchohol %</label>
						<input type="input" name="alchohol" id="alchohol">
						<br> -->
						<label for="image">Photo</label>
						<input type="file" name="image" id="image">
						<br>
						<label for="description">Description</label>
						<input type="input" name="description" id="description">
						<br>
						<label for="submit">Submit</label>
						<input type="submit" name="submit" id="submit">
					</form>
				</div>
			</div>

			<!-- Learn More Modal -->
			<div id="learnMoreModal" class="modal">
				<div class="learnMoreModalContainer">
					<img id="learnMoreImage" >
					<div id="learnMoreContent">
							<h2 id="learnMoreTitle"></h2>
							<p id="learnMoreRegion"></p>
							<p id="learnMoreBrewery"></p>
							<p id="learnMoreSizes"></p>
							<p id="learnMoreTaste"></p>
							<p id="learnMorePairing"></p>
							<p id="learnMoreStyle"></p>
							<p id="learnMorePrice"></p>
							<p id="learnMoreDescription"></p>
					</div>
					<span class="close">&times;</span>
				</div>
    </div>
		<!-- Mobile Filters Modal -->
		<div id="mobileModal" class="modal">
		<div class="modal-content">
			<span class="close">&times;</span>
			<div class="filters">
				{% for filter in filters %}
					<button class="accordion">{{ filter.section }}</button>
					<div class="panel">
						{% for item in filter.fields %}
							<input type="checkbox" name="{{ item.name }}" id="{{ item.id }}" value="{{ item.value }}">
							<label for="{{ item.id }}">{{ item.label }}</label>
							<br/>
						{% endfor %}
					</div>
				{% endfor %}
				<button id="mobileClearFilters">Clear Filters</button>
			</div>
		</div>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
	<script src="../static/js/script.js"></script>
</body>
</html>